<!-- Dropdown -->
<!-- Dropdown -->
{% assign navurl = page.url | remove: 'index.html' %}
<!-- Test if data is accessible -->
{{ site.data.dropdown | inspect }}
<div class="dropdown-container">
  {% for item in site.data.dropdown %}
    {% if item.subitems %}
      <div class="dropdown">
        <!-- Icon acting as the button -->
        <button class="dropdown-button" aria-haspopup="true" aria-expanded="false" onclick="toggleDropdown(this)">
          <i class="material-icons">menu</i>
        </button>
        <!-- Dropdown menu -->
        <ul id="dropdown-{{ item.slug }}" class="dropdown-content" hidden>
          {% for subitem in item.subitems %}
            <li><a href="{{ subitem.url }}">{{ subitem.text }}</a></li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  {% endfor %}
</div>

<!-- CSS for styling -->
<style>
  .dropdown {
    position: relative;
    display: inline-block;
  }

  .dropdown-button {
    background-color: transparent;
    border: none;
    cursor: pointer;
    font-size: 24px; /* Adjust as needed */
  }

  .dropdown-content {
    display: none; /* Initially hidden */
    position: absolute;
    background-color: white; /* Change as needed */
    min-width: 160px; /* Adjust as needed */
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
  }

  .dropdown-content li {
    list-style: none;
  }

  .dropdown-content li a {
    display: block;
    padding: 8px 16px; /* Adjust padding as needed */
    text-decoration: none;
    color: black; /* Change as needed */
  }

  .dropdown-content li a:hover {
    background-color: #f1f1f1; /* Change as needed */
  }

  /* Show dropdown when button is clicked */
  .show {
    display: block;
  }
</style>

<!-- JavaScript for dropdown functionality -->
<script>
  function toggleDropdown(button) {
    const dropdownContent = button.nextElementSibling;
    const isOpen = dropdownContent.classList.contains('show');

    // Close all other dropdowns
    const allDropdowns = document.querySelectorAll('.dropdown-content');
    allDropdowns.forEach(drop => {
      drop.classList.remove('show');
      drop.setAttribute('hidden', true);
    });

    // Toggle the clicked dropdown
    if (!isOpen) {
      dropdownContent.classList.add('show');
      dropdownContent.removeAttribute('hidden');
      button.setAttribute('aria-expanded', true);
    } else {
      dropdownContent.classList.remove('show');
      dropdownContent.setAttribute('hidden', true);
      button.setAttribute('aria-expanded', false);
    }
  }

  // Close the dropdown if clicked outside
  window.onclick = function(event) {
    if (!event.target.matches('.dropdown-button')) {
      const allDropdowns = document.querySelectorAll('.dropdown-content');
      allDropdowns.forEach(drop => {
        drop.classList.remove('show');
        drop.setAttribute('hidden', true);
      });
    }
  };
</script>

<!-- NavBar -->
<div class="navbar-fixed">
  <nav class="EstudiantesRSEF" role="navigation">
      <div class="nav-wrapper container">
          <a href="#" data-activates="nav-mobile" class="button-collapse hide-on-large-only"><i class="material-icons">menu</i></a>
          <a id="logo-container" href="/PLANCKS25"><strong>PLANCKS Barcelona 2025</strong></a>

          <ul class="right hide-on-med-and-down">
            {% for item in include.nav %}
            {% if item.subitems %}
            <li>
              <a class="dropdown-button" href="{{ item.url }}" data-activates="dropdown-{{ item.slug }}">{{ item.text }}<i class="material-icons right">arrow_drop_down</i></a>
            </li>
            {% else %}
              <li>
                  <a href="{{ item.url }}">
                      {% if item.url == navurl %}
                          <b>{{ item.text }}</b>
                      {% else %}
                          {{ item.text }}
                      {% endif %}
                  </a>
              </li>
              {% endif %}
          {% endfor %}
          </ul>

          <ul id="nav-mobile" class="side-nav">
              <li class="logo"><a id="mobile-logo-container" href="/"><object id="front-page-logo" type="image/png" style="width:100%; height:100%;" src="/PLANCKS25/img/Logo.jpg">Your browser does not support PNG</object></a></li>
              {% for item in include.nav %}
                  {% if item.subitems %}
                  <li class="no-padding">
                  <ul class="collapsible collapsible-accordion">
                    <li>
                        <a class="collapsible-header">{{ item.text }}</a>
                      <div class="collapsible-body">
                        <ul>
                      {% if item.url != nil %}
                          <li><a href="{{ item.url }}">{{ item.text }}</a></li>
                      {% endif %}
                      {% for subitem in item.subitems %}
                          <li><a href="{{ subitem.url }}">{{ subitem.text }}</a></li>
                      {% endfor %}
                        </ul>
                      </div>
                    </li>
                  </ul>
                  </li>
                  {% else %}
                  <li><a href="{{ item.url }}">
                    {% if item.url == navurl %}
                    {{ item.text }}
                    {% else %}
                    {{ item.text }}
                    {% endif %}
                  </a></li>
                  {% endif %}
              {% endfor %}
          </ul>
      </div>
  </nav>
</div>
